Bu heyecan verici kısım, benim için zaten öyle. Esasen sipariş yürütmemizi başlatacak çok kısa ama tatlı bir fonksiyon yazacağız. Ayrıntıları sipariş defterinden alacak. Bunları sipariş vermeye koyacak ve bu siparişi verirken esasen sahip olduğu sipariş kimliğini bize geri gönderecek. Bu çok küçük bir fonksiyon ama yine her şeyin merkezinde yer alan fonksiyonlardan biri. Yani burada, yürütmeyi bu şekilde başlat diyeceğiz ve bu, def'in sipariş yürütmesini başlatması olacak. Ve bu, sipariş vermek istediğimiz kaydı alacak. Yerleştirmek istediğimiz yönü, siparişi ve bu siparişi vermek için enjekte etmek istediğimiz sermaye miktarını alacak. Peki ne kadar sermaye ile ticaret yapacağız? Yani bu işlevi daha önce görmüştük. Bu sipariş defteri olacak. Bilirsiniz, herkese eşit olacak ve bu nokta getirme gibi olacak. Ve burada ne yapacağız? Aslında bundan geri dönmek istediğimiz kaydı koyacağız. Yani bu temelde şu olacak ki, ikinci seviye sipariş kitabı olan abone olduğumuz şeyi koymalıyız ve bu 25'tir. Yani burada halka açık web soketine geri dönerseniz, burada burada olduğunu göreceksiniz. Aslında bunu kopyalayabiliriz. Yani bunu alıyoruz ve buraya getirme işlemine koyuyoruz. Birinci sıra olmaması dışında, hangi şifreyi geçtiysek o olur. Yani yapılacak şey bu. Ve sonra burada yapacağımız şey, orta fiyatın eşit olacağını söyleyeceğiz. Üzgünüm, orta fiyat, zararı durdurma ve miktar eşit olacak, bilirsiniz, ticaret detaylarını al, ki bu da fonksiyonu zaten yazdık ve buna içe aktarıyoruz, bilirsiniz, bu fonksiyon, bu dosya. Ve burada söyleyeceğiz, bilirsiniz, bunun sipariş defterini hesaba katması gerekiyor. Yönü hatırlarsanız dikkate almanız gerekir. Ve sermayeyi hesaba katması gerekiyor, yani yapılacak şey bu. Ve sonra sipariş eşit olacak. Ve aslında, bu bir sipariş kimliği gibi olacak. Ancak kimliği alacak olan bir sipariş nesnesi olacaktır. Ama bu, bilirsiniz, az önce burada yazdığımız yer siparişini yapacak, değil mi? Sipariş Vermek. Yani bu, sipariş üzerine uygulanacak ve bu, orta fiyat olacak olan senedi hesaba katacak, yön olacak olan miktar olacak. Ve sonra elbette, hepsi buna dahil olan stoploss'a da sahip olacağız. Peki burada neler oluyor? Siparişi alıyoruz. En sonuncuyu web soketimizden ayırtın. Sipariş fiyatını çıkarıyoruz. Biliyorum, buna orta fiyat diyorum ama ne istersen diyebilirsin. Buna emir fiyatı, zararı durdurma, sipariş defterini sorgulayan ticaret detaylarını alacağımdan miktar olarak adlandırın. Ve sonra aslında tüm bu ayrıntılarla birlikte burada olduğumuza dair bir emir alıyoruz. Ve bu, tüm bu bilgileri sırayla almak için üç satır kod. Bu yüzden çok heyecanlanıyorum. Sıralama nokta tuşlarında bir sonuç varsa diyeceğim ve bunu neden mesajla değil de sonuçlarla yaptığımı açıklayayım, tamam, daha önce yaptığımız gibi.Yani biliyorsunuz, bu emir verecek, ki bu da aktif emirleri çalıyor. Öyleyse yer, etkin düzen, yer, etkin düzene bakalım. Buradayız. Bir saniye bekle. Hesabımız nerede? Veri uç noktaları, aktif siparişler. Aktif sipariş verin. İşte gidiyorsun. Ve geri dönüş mesajı var. Tamam, ama aynı zamanda sonuçları da var. Yani aslında söylediğimiz şey, sonuçtur. Biliyorsunuz, burada gerçekten yapmamız gereken dönüş mesajı değil, tamam, sadece söyleyeceğim, bir sonuç var mı? Bu yüzden sanırım daha önce yaptığımızdan biraz daha iyi yapıyorum. Yani sonuçlar oradaysa ve muhtemelen geri dönüş mesajını kaldırabilirsiniz, tamam, diğerlerinden, bu sadece sonucun nerede olduğuna bağlı olarak, tuşların ilk katmanında mı yoksa değil mi? Ve bu, anahtar demek demek, üzgünüm. Bu yüzden bunu düzeltmemiz gerekiyor. Ve burada, sipariş kimliğinin sipariş sonuçlarında olup olmadığına gideceğiz. Bu nedenle, siparişi iade edin. Sonuçlar, başka bir deyişle, doğrudan o siparişi almaya gideceğiz. Ve bir kez bu düzeni elde ettiğimizde, sipariş edin. Biz, bilirsiniz, onunla daha sonra oynayacağız. Bunu, pozisyonların doldurulup doldurulmadığını kontrol etmek için kullanacağız, vb. Yani, değilse, bu sadece sıfır olacaktır. Yani başka bir deyişle, bu, aksi halde bulursa kimliği döndürür, burada doğrudan sıfır döndürmeye gider. Şimdi test edelim ve her şeyin olması gerektiği gibi çalıştığından emin olalım. O halde bunu buraya kopyalayalım ve en altta arayalım şimdi gidip bunu sileceğiz. Kelimenin tam anlamıyla sadece her şeyin çalıştığını test etmek için. Yani bu Matic USD T olacak. Size ne diyeceğim, aslında bunu kısa pozisyon olarak koyalım çünkü henüz şortla oynamadık ve bin değerinde sermaye koyduk. Yani bu arayacak. Şimdi burada devam eden web soketimiz var. Sanırım yapmamız gereken şey, gerçekten biraz zaman ayıralım Pierre, çünkü bence web soketini çalıştırmak için buna ihtiyaç olacak. Ve tüm bunları tek tek hareket ettirelim. Döngüden fırlamasın diye bu dönüşü hızlıca yorumlayacağım. Şimdilik bir döngü içinde kalmak istedim. Ve diyeceğim ki, bilirsiniz, eğer sipariş defteri ise, o zaman, bilirsiniz, geri kalanını burada yapın, sonra orta fiyatı alın, vb. Yani bir düzen, kitap vs. olduğundan emin olmak istiyoruz. Şimdi gerçekten gidip tüm kodumuzu bir süre içinde döngüye koyduğumuzda, o zaman bunu fonksiyonlar içinde yapmak zorunda kalmayacağız. Zaten gidip yaptığımız her şeyi kaldırmak üzereyim. Bunun neye benzediğini görmek için, burada orta fiyatın, zararı durdurmanın ve miktarın bir çıktısını alalım. Ayrıca, her şey başarılı olursa almamız gereken asıl siparişin bir çıktısını burada alalım. Ve aslında, bırakacağım bir şey var, bilirsiniz, örneğin orta fiyat olsa, burada bir miktar gibi bir şey beklerdim. Yani diyeceğim ki eğer miktar sıfırdan büyükse, o zaman bu, bir şeyi iade etmemiz, sonra siparişi vermemiz ve yapmak istediğimiz her şeyi yapmamız gerekir. Yani burada yapacağım şey bu. Bunu şimdi yapacağım. Bunu yapmak zorunda değilsin. Sadece izleyebilirsiniz. Ama bunu kodunuzda yapmanızı ve bunun gerçekten çağrıldığından emin olmanızı tavsiye ederim, vb. Öyleyse devam edelim. Aslında, burada yapacağım ilk şey, saydığım kadar, sıfıra eşittir.Ve o siparişi verdikten sonra bir daha vermesini istemiyorum. Sayılar artı bire eşittir diyeceğim çünkü şimdi onu bir döngüye soktum. Ve eğer sipariş defteri ve sayımlar, bilirsiniz, sıfıra eşitse, devam edin ve sırayı yerleştirin. Burada söyleyeceğim şey bu, böylece sadece döngüden geçip tonlarca sipariş vermekle kalmıyor, bilirsiniz, yetişebileceğimden daha hızlı. Yani ne olacak, sıfır sayımız var. Gidecek, bilirsiniz, o web soketine bağlanacak veya web soketinden veri alacak. Bu iade edilirse ve hesaplar hala sıfırsa, devam edin ve siparişi verin. Siparişi verdikten sonra, sayıları bir olarak değiştirin, böylece tekrar buraya geldiğinde başka bir sipariş vermemesi gerektiğini bilsin. Ve biz de bunu yapacağız. Oynat ve patlayacak, değil mi? Orada dur. Orta fiyatı veya kapalı fiyatı aldık, buna stoploss ve miktar diyoruz. Bu harika. Biçimlendirme iyi görünüyor. Ama şimdi burada ilginç olan ve aslında, onu aşağıda görebilirsiniz. Bu, hücre pozisyonu için durdurma kaybının taban fiyattan daha büyük olması gerektiğidir. Başka bir deyişle, hücre pozisyonunun altına uzun bir pozisyonmuş gibi bir stop loss koyduk. Yani orada kesinlikle korkak bir şeyler oluyor ve bunu görebiliyorum. Bir atışta durdurma kaybım neden girdiğim fiyattan daha düşük olsun? Yani, bilirsin, aslında bu hatayı daha önce görmüştüm, yani ne yapacağını biliyorum? Ticaret detaylarını almak için gidelim ve buraya bir göz atalım. Ve hata şu ki, kaybı durdurmayı bir eksi durdurma kaybı olarak koydum ve bu beklediğim bir şey değil. Biliyorsun, gidip orada yapmalıyız. Gerçekte yapması gereken şey, bir demesi gerektiğidir, bilirsiniz, temelde bir artı demesi gerekir, değil mi? Yani stop loss'u hesaplarken eksi gitmemeli, aşağıda olmamalı, ama böyle yukarıda olmalı. O halde bu değişikliği yapalım. Kaydet'e basın ve buraya tekrar döneceğim. Sağ tıklayın ve yürütme çağrılarını çalıştırın. Ve bu şimdi işe yaramalı. Ve patlama, işe yaradı. Ve işe yaradığını doğrulayalım. Eğer buraya gidersem ve aktif emirlerime buradan bakarsam, metrik emirlerimin verildiğini görebilirim ve bunu iptal edeceğim çünkü bunun dolmasını istemiyorum. Fakat. Bizim için çalıştı, bu nedenle bu işlev çalışıyor. Şimdi gidip temizleyelim. Doğruyken buna ihtiyacım yok. Konseye gerek yok. Hiçbirine ihtiyacım yok. Sayımlarda sipariş defterine ihtiyacım yok, bundan kurtulabiliriz. Bu çıktıya ihtiyacım yok. if miktarını burada bırakacağım. Orada sayılanlara ihtiyacım yok. Orada buna ihtiyacım yok. Buraya geri dönelim ve bu yorumdan da kurtulalım ve sadece sıfıra dönelim. Yani bu olmadıysa, o zaman sadece sıfıra döneceğiz. Bu işlevi çağırmaktan da kurtulabiliriz. Ve akıl sağlığımı kontrol etmeme izin ver. Böylece sipariş defterini aldık. Bir şey iade edilirse, sipariş defterinin ticari ayrıntılarını alıyoruz. Sonra başlıyoruz. Biz işin içindeyiz. Ve eğer bir şey olursa, burada yapacağım şey, ayrıca sadece şunu söylemek, eğer sipariş defteri doğruysa, bu yapılacak başka bir güvenli şey. Sadece gerçekten iade edilen bir sipariş defteri olduğundan emin olmak için. Ve işte başlıyoruz. Yeteri kadar iyi. Bunu burada bırakacağım ve iş gerçekten bununla ticaret yapmaya geldiğinde, bunun gayet iyi çalıştığına güveneceğim.