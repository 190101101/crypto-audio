Now that we've got our orders being placed, what I'd like to do before we go and test the bot more and actually watch it in action is finish off the bulk of the coding here, and we're going to give it one really big push here in this video. We're going to go and check the orders and return whatever the kill switch result is. And then in the next video, we're actually going to run at more and just give our observations as to how it's performing. So you really, really close to having this bot complete. So what we want to do here is check limit orders and ensure the Z-score still is still within range is still within range. Right. So that's the first thing we need to check. So we're going to say Z-score, and I'm going to call this new because we've already got the Z score, but I'm going to get a Z score on you and a signal signal sign. I'm going to say signal sign p for positive u is equal to get the latest Z score. So we're going to just again, just call upon that function we built before, and we're going to say, look, if the kill switch is equal to zero, which it should be because we haven't switched it to one yet, only if it was a market order do we switch it to one. So if the kill switch is zero, that must mean that, hey, you know, we need to check on our orders. So but before we do that, we need to say if the absolute of the Z score new not ends, sorry EPS for absolute if the Z-score new is greater than the signal trigger threshold for the Z score. And here I'm going to say time's 90 percent, so I'll take 90 percent of that number because, you know, the Z score could have just about triggered. We place a trade and then all of a sudden you're telling it, OK, what if it's gone, you know, 0.1 below that close to trade? Well, no, because you're kind of wasting resources, and if you placing orders, you just give it some room to breathe, right? So here I'm going to say zero point nine or maybe zero point nine five, I'm going to leave it at zero point nine. And the signal we're always signaling sign and that's for positive nu is equal to the signal sign positive. Right. So if whatever that is, it's still equal to whatever it was before, meaning that the Z score, you know, it might be within the threshold. But if the sign of the Z school, I if it's negative as change to what it was when you place the trade, then probably what's going on is it's just flipped to the other side. Yet you don't realize that. So that's what that's checking. And then, you know, with these things in mind, now we're going to go and check on our positions. So we're going to check long order status. So there's a number of things we're going to do. In fact, I'm going to type out the comments for you. So you know what we're going to do, we're going to check the long order order status. That's the first thing we're going to do. And then we going to check the short order status. And when we get that order status, that should tell us, is it active? Is it filled? Is it partially filled, etc. And here what we're going to say now is once we have those right, then what we're going to do here is we're going to say if Ord is still active, for example. If orders still active. Then, you know, do nothing essentially do nothing. And what we were also then going to say here is if the order is still active, do nothing again. But that's going to be, you know, that's going to be for the partial fill. So if order or does partial fill, you know, do nothing. And so this is, you know, all the different scenarios that could be coming up for our order here. So I think what other scenarios could come up, right? Either it's active, either it's partially filled. What else did we put in our function if the orders trade complete? Right? And that's going to be for the short as well. Then you know, what we need to do in that case is stop placing trades like stock trading, stop opening trades. Now, what if the position is filled for both, you know, the long and the short? Well, then we need to go again, place more and place place another trade, right? Because our trade is not complete, so we still have more capital to get gone in the in the limit order process. So that's that. And then what else do we have? Right. So we've got that for the position being filled and then what if it's try again? You know what, if the orders cancelled? So what if order cancelled? For long, I try again. And we're going to do the same thing here for the short as well, so this is all going to start making sense. The code is going to be super quick. I know it looks like there's a lot we have to code up here, but it's almost one line of code per line because of how efficient we've made functions before. And so let's actually start coding this up. So the first thing we're going to say here is, you know, if our counts long is equal to one. In other words, we must have, you know, a long order for this to be the case in all the states, as long is going to be equal to check order. And now this check order is coming in and we get to pass in our ticker, which will be the long ticker, the order on it. We're going to pass in our remaining capital, not short, but our remaining capital long. And the direction which is right. So that's something we're going to go and do for that and we're going to copy the exact same thing here. But for the short states, it's right. So if the counts short is equal to one, then the order status and again, make sure that you check everything here with a fine tooth comb. Short ticker or the short ID remaining capital short and then the direction here is short. So how are we getting this with a check order while we're in the order it that we're getting from up here where we placed our order? So if you look up here, where are we order long I.D. or a short ID? And then down here we pass that into our check order function here, where if you remember, we actually went through all of these scenarios and return partial fill or active, etc.. So that's what's happening over here. So assuming that those are getting returned correctly, then what are we going to do here? Is we going to say if our order status long is equal to or order active? It's equal to order active or our order status short is equal to order active. Either one equals or two active do not do anything else, right? So this will be just continue. Don't do anything else. And so let's copy this down over here as well. And let's say that if our order status long is equal to partial fill right or our order state is short, is equal to partial fill, then we want to continue once more. So same thing again. And then what are we going to say down here? Is we going to copy that? And we're going to say if our order states as long is equal to trade complete and now this is not an all, but it's an end and the order state is short, is equal to trade complete. Well, that's very simple, because now all we need to do is say, I'll kill switch must be equal to one similar to the market order up here because that's a complete the minute you place it. Pretty much. But now you know, this is saying all of our limit orders got filled. So change the kill switch to one, and that's what we hoping for. We are hoping to get to this. If we get to this, then we're doing well. Now, let's copy this down here as well. And we'll say if the order status long is equal to position filled as such, right? So position filled or the order status short is equal to position filled and sorry, not all. And both of those need to be the case. Then what are we going to do is allow it to place another order in the way we're going to do that. You said the council on two zero and the counts short to zero as well, because then that will tell this bit of code up here that it is allowed that it is allowed to trade. So where are we? You know, if the council on a zero, if the count shorted zero, it will tell it that it is allowed to trade again and place another position to get filled until the trade is indeed complete. And then finally, if the order status long is equal to try again, then in that case, or to say as long as try again in our counseling needs to be equal to zero because we want to try and place that order again. And it's going to be the same thing here for the shorter. If the orders that is short is equal to try again, then our counts short needs to be equal to zero. Now this is all fair and well, but you know what happens if this is not the case, right? What happens if the Z-score test is not passed, and that means we shouldn't really be in a position? Well, then what we need to do down here is we need to say else over down at the bottom here. And if that is the case, then we need to cancel all active orders, right? And to do that? It's very simple. We just go as session private dot cancel all active orders and the symbol that we're going to cancel for is going to be the signal sign positive and the same thing here, right? It's going to be the signal sign, except this time negative. So we just duplicate that. And let me just see this here. So no, that's wrong. Signal positive ticker. It's very easy for me to rush and get confused, and that should be signal negative ticker. So that's the that's the ticker that we're going to pass in to make sure there's no active orders for those. And straight afterwards, we're going to say the kill switch is equal to one. And then because the kill switch is equal to one, it's going to trigger essentially going to trigger for this two to know that, you know, everything is essentially being filled and then to go and manage that accordingly, it'll stop this loop over here and it's going to stop trying to place, you know, place more trades. So in other words, if there's a problem with the signal, i.e. the Z scores changed and our orders aren't filled yet, it's like tough takis it's saying we have in South Africa, right? Tuckey's are like shoes. You wear running shoes in the UK, they're called trainers. Tough Tuckey's. It basically means that we are not going to try and place any more. Even though we didn't get completely filled, stop trying to place trades because the signal is no longer in our favour. And I know we've done a lot of coding here with this section here, but we are nearly done here to actually go and, you know, write out return function here. So we're going to say, you know, check for Signal to be false and say what this is doing in the minute. So if the kill switch is equal to one right, then what we want to do is say if signal's side. So if the signal side is equal to positive, in other words, so positive like this positive? Yes, very important that I get the spelling right and the Z score is less than zero, then kill switch is equal to two. And then here we're going to say if the signal side is equal to negative and the Z score is greater than or equal to zero, then we're going to say the kill switch is also equal to two. So what is this doing? Here we are just simply saying that if our signal side is registered as positive. But the Z-score is no longer positive, then that means a mean reversion has happened, and we can now proceed to close our positions. The kill switch being two means you'll close the positions if our signal side is negative. So what we had registered up here, but now the Z-score is updated and its comeback is positive. That again, means the meaner reversions happened. We're ready to close the trades and now all we need to do is output the status of the kill switch. So this will be return, kill, switch. And I know this has been a lot of coding. You've done really well to get this far. So well done. Well done in bearing with me here. Right. So this will go through. We're going to talk more about what's going on here because I know it's a lot to follow. And you know, essentially what will be happening here is on the main page. We're going to get that kill switch coming through as positive road kill switches, manage new trades, manage new trades is let me just close all the other tabs here and just have these two open many new trades. It's all of this that we've just gone and essentially written. And that's coming through here. And then if the kill switch comes back as to then it's going to try to go here and close the positions which we already have, you know, market close instructions for over here. So we're going to talk more about what's about to happen and we're going to go and run this shortly right now in the next video to see how do these trades actually perform and behave?